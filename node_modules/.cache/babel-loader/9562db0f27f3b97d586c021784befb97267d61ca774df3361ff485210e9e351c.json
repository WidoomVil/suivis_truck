{"ast":null,"code":"import React,{useEffect,useRef}from\"react\";// Helpers\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const getDayClass=jour=>{if(!jour)return\"\";const j=jour.toLowerCase().trim();if(j.includes(\"lundi\"))return\"day-lundi\";if(j.includes(\"mardi\"))return\"day-mardi\";if(j.includes(\"mercredi\"))return\"day-mercredi\";if(j.includes(\"jeudi\"))return\"day-jeudi\";if(j.includes(\"vendredi\"))return\"day-vendredi\";return\"\";};const isCurrentDay=jour=>{if(!jour)return false;const today=new Date();const dayNames=[\"dimanche\",\"lundi\",\"mardi\",\"mercredi\",\"jeudi\",\"vendredi\",\"samedi\"];const currentDayName=dayNames[today.getDay()];return jour.toLowerCase().includes(currentDayName);};export default function ScheduleView(_ref){let{parsed}=_ref;const containerRef=useRef(null);// Scroll auto\nuseEffect(()=>{if(!containerRef.current)return;let scrollPos=0;const scrollStep=1;const delay=50;const pause=5000;let interval;const startScroll=()=>{interval=setInterval(()=>{if(!containerRef.current)return;scrollPos+=scrollStep;if(scrollPos>=containerRef.current.scrollHeight-containerRef.current.clientHeight){clearInterval(interval);setTimeout(()=>{scrollPos=0;if(containerRef.current)containerRef.current.scrollTop=0;startScroll();},pause);}else{containerRef.current.scrollTop=scrollPos;}},delay);};startScroll();return()=>clearInterval(interval);},[parsed]);if(!parsed||!parsed.rows)return null;const suppliers=Object.keys(parsed.rows);const maxUnits=Math.max(...suppliers.flatMap(s=>parsed.rows[s].map(r=>r.units.length)),1);return/*#__PURE__*/_jsxs(\"div\",{className:\"schedule-container\",ref:containerRef,children:[/*#__PURE__*/_jsx(\"div\",{className:\"schedule-header\",children:parsed.title||\"PLANIFICATION ATELIER\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"schedule-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"col-Fournisseur\",children:\"Fournisseur\"}),/*#__PURE__*/_jsx(\"th\",{className:\"schedule-col-label\",children:\"Jour\"}),Array.from({length:maxUnits},(_,i)=>/*#__PURE__*/_jsxs(\"th\",{className:\"schedule-col-unit\",children:[\"Unit\\xE9 \",i+1]},i))]})}),/*#__PURE__*/_jsx(\"tbody\",{children:suppliers.map((supplier,supplierIdx)=>parsed.rows[supplier].map((r,idx)=>{const isFirstRow=idx===0;const dayClass=getDayClass(r.jour);const isEvenSupplier=supplierIdx%2===0;const isTodayRow=isCurrentDay(r.jour);return/*#__PURE__*/_jsxs(\"tr\",{className:\"\\n                    \".concat(isFirstRow?\"supplier-first-row\":\"\",\"\\n                    \").concat(isEvenSupplier?\"supplier-group-even\":\"\",\"\\n                    \").concat(isTodayRow?\"current-day-row\":\"\",\"\\n                  \").trim(),children:[/*#__PURE__*/_jsx(\"td\",{className:\"col-Fournisseur\",children:isFirstRow?supplier:\"\"}),/*#__PURE__*/_jsx(\"td\",{className:\"schedule-col-label \".concat(dayClass,\" \").concat(isTodayRow?\"current-day\":\"\"),children:r.jour}),Array.from({length:maxUnits},(_,i)=>/*#__PURE__*/_jsx(\"td\",{className:\"schedule-col-unit\",children:r.units[i]||\"\"},i))]},\"\".concat(supplier,\"-\").concat(idx));}))})]})]});}","map":{"version":3,"names":["React","useEffect","useRef","jsx","_jsx","jsxs","_jsxs","getDayClass","jour","j","toLowerCase","trim","includes","isCurrentDay","today","Date","dayNames","currentDayName","getDay","ScheduleView","_ref","parsed","containerRef","current","scrollPos","scrollStep","delay","pause","interval","startScroll","setInterval","scrollHeight","clientHeight","clearInterval","setTimeout","scrollTop","rows","suppliers","Object","keys","maxUnits","Math","max","flatMap","s","map","r","units","length","className","ref","children","title","Array","from","_","i","supplier","supplierIdx","idx","isFirstRow","dayClass","isEvenSupplier","isTodayRow","concat"],"sources":["C:/Users/FabienRobert/OneDrive - Villéco/Documents/GitHub/suivis_truck/src/ScheduleView.jsx"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\r\n\r\n// Helpers\r\nconst getDayClass = (jour) => {\r\n  if (!jour) return \"\";\r\n  const j = jour.toLowerCase().trim();\r\n  if (j.includes(\"lundi\")) return \"day-lundi\";\r\n  if (j.includes(\"mardi\")) return \"day-mardi\";\r\n  if (j.includes(\"mercredi\")) return \"day-mercredi\";\r\n  if (j.includes(\"jeudi\")) return \"day-jeudi\";\r\n  if (j.includes(\"vendredi\")) return \"day-vendredi\";\r\n  return \"\";\r\n};\r\n\r\nconst isCurrentDay = (jour) => {\r\n  if (!jour) return false;\r\n  const today = new Date();\r\n  const dayNames = [\"dimanche\",\"lundi\",\"mardi\",\"mercredi\",\"jeudi\",\"vendredi\",\"samedi\"];\r\n  const currentDayName = dayNames[today.getDay()];\r\n  return jour.toLowerCase().includes(currentDayName);\r\n};\r\n\r\nexport default function ScheduleView({ parsed }) {\r\n  const containerRef = useRef(null);\r\n\r\n  // Scroll auto\r\n  useEffect(() => {\r\n    if (!containerRef.current) return;\r\n\r\n    let scrollPos = 0;\r\n    const scrollStep = 1;\r\n    const delay = 50;\r\n    const pause = 5000;\r\n    let interval;\r\n\r\n    const startScroll = () => {\r\n      interval = setInterval(() => {\r\n        if (!containerRef.current) return;\r\n        scrollPos += scrollStep;\r\n        if (scrollPos >= containerRef.current.scrollHeight - containerRef.current.clientHeight) {\r\n          clearInterval(interval);\r\n          setTimeout(() => {\r\n            scrollPos = 0;\r\n            if (containerRef.current) containerRef.current.scrollTop = 0;\r\n            startScroll();\r\n          }, pause);\r\n        } else {\r\n          containerRef.current.scrollTop = scrollPos;\r\n        }\r\n      }, delay);\r\n    };\r\n\r\n    startScroll();\r\n    return () => clearInterval(interval);\r\n  }, [parsed]);\r\n\r\n  if (!parsed || !parsed.rows) return null;\r\n\r\n  const suppliers = Object.keys(parsed.rows);\r\n  const maxUnits = Math.max(\r\n    ...suppliers.flatMap(s => parsed.rows[s].map(r => r.units.length)),\r\n    1\r\n  );\r\n\r\n  return (\r\n    <div className=\"schedule-container\" ref={containerRef}>\r\n      <div className=\"schedule-header\">{parsed.title || \"PLANIFICATION ATELIER\"}</div>\r\n      <table className=\"schedule-table\">\r\n        <thead>\r\n          <tr>\r\n            <th className=\"col-Fournisseur\">Fournisseur</th>\r\n            <th className=\"schedule-col-label\">Jour</th>\r\n            {Array.from({ length: maxUnits }, (_, i) => (\r\n              <th key={i} className=\"schedule-col-unit\">Unité {i + 1}</th>\r\n            ))}\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {suppliers.map((supplier, supplierIdx) =>\r\n            parsed.rows[supplier].map((r, idx) => {\r\n              const isFirstRow = idx === 0;\r\n              const dayClass = getDayClass(r.jour);\r\n              const isEvenSupplier = supplierIdx % 2 === 0;\r\n              const isTodayRow = isCurrentDay(r.jour);\r\n\r\n              return (\r\n                <tr\r\n                  key={`${supplier}-${idx}`}\r\n                  className={`\r\n                    ${isFirstRow ? \"supplier-first-row\" : \"\"}\r\n                    ${isEvenSupplier ? \"supplier-group-even\" : \"\"}\r\n                    ${isTodayRow ? \"current-day-row\" : \"\"}\r\n                  `.trim()}\r\n                >\r\n                  <td className=\"col-Fournisseur\">{isFirstRow ? supplier : \"\"}</td>\r\n                  <td className={`schedule-col-label ${dayClass} ${isTodayRow ? \"current-day\" : \"\"}`}>\r\n                    {r.jour}\r\n                  </td>\r\n                  {Array.from({ length: maxUnits }, (_, i) => (\r\n                    <td key={i} className=\"schedule-col-unit\">{r.units[i] || \"\"}</td>\r\n                  ))}\r\n                </tr>\r\n              );\r\n            })\r\n          )}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAEhD;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBACA,KAAM,CAAAC,WAAW,CAAIC,IAAI,EAAK,CAC5B,GAAI,CAACA,IAAI,CAAE,MAAO,EAAE,CACpB,KAAM,CAAAC,CAAC,CAAGD,IAAI,CAACE,WAAW,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,CACnC,GAAIF,CAAC,CAACG,QAAQ,CAAC,OAAO,CAAC,CAAE,MAAO,WAAW,CAC3C,GAAIH,CAAC,CAACG,QAAQ,CAAC,OAAO,CAAC,CAAE,MAAO,WAAW,CAC3C,GAAIH,CAAC,CAACG,QAAQ,CAAC,UAAU,CAAC,CAAE,MAAO,cAAc,CACjD,GAAIH,CAAC,CAACG,QAAQ,CAAC,OAAO,CAAC,CAAE,MAAO,WAAW,CAC3C,GAAIH,CAAC,CAACG,QAAQ,CAAC,UAAU,CAAC,CAAE,MAAO,cAAc,CACjD,MAAO,EAAE,CACX,CAAC,CAED,KAAM,CAAAC,YAAY,CAAIL,IAAI,EAAK,CAC7B,GAAI,CAACA,IAAI,CAAE,MAAO,MAAK,CACvB,KAAM,CAAAM,KAAK,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CACxB,KAAM,CAAAC,QAAQ,CAAG,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,OAAO,CAAC,UAAU,CAAC,QAAQ,CAAC,CACpF,KAAM,CAAAC,cAAc,CAAGD,QAAQ,CAACF,KAAK,CAACI,MAAM,CAAC,CAAC,CAAC,CAC/C,MAAO,CAAAV,IAAI,CAACE,WAAW,CAAC,CAAC,CAACE,QAAQ,CAACK,cAAc,CAAC,CACpD,CAAC,CAED,cAAe,SAAS,CAAAE,YAAYA,CAAAC,IAAA,CAAa,IAAZ,CAAEC,MAAO,CAAC,CAAAD,IAAA,CAC7C,KAAM,CAAAE,YAAY,CAAGpB,MAAM,CAAC,IAAI,CAAC,CAEjC;AACAD,SAAS,CAAC,IAAM,CACd,GAAI,CAACqB,YAAY,CAACC,OAAO,CAAE,OAE3B,GAAI,CAAAC,SAAS,CAAG,CAAC,CACjB,KAAM,CAAAC,UAAU,CAAG,CAAC,CACpB,KAAM,CAAAC,KAAK,CAAG,EAAE,CAChB,KAAM,CAAAC,KAAK,CAAG,IAAI,CAClB,GAAI,CAAAC,QAAQ,CAEZ,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACxBD,QAAQ,CAAGE,WAAW,CAAC,IAAM,CAC3B,GAAI,CAACR,YAAY,CAACC,OAAO,CAAE,OAC3BC,SAAS,EAAIC,UAAU,CACvB,GAAID,SAAS,EAAIF,YAAY,CAACC,OAAO,CAACQ,YAAY,CAAGT,YAAY,CAACC,OAAO,CAACS,YAAY,CAAE,CACtFC,aAAa,CAACL,QAAQ,CAAC,CACvBM,UAAU,CAAC,IAAM,CACfV,SAAS,CAAG,CAAC,CACb,GAAIF,YAAY,CAACC,OAAO,CAAED,YAAY,CAACC,OAAO,CAACY,SAAS,CAAG,CAAC,CAC5DN,WAAW,CAAC,CAAC,CACf,CAAC,CAAEF,KAAK,CAAC,CACX,CAAC,IAAM,CACLL,YAAY,CAACC,OAAO,CAACY,SAAS,CAAGX,SAAS,CAC5C,CACF,CAAC,CAAEE,KAAK,CAAC,CACX,CAAC,CAEDG,WAAW,CAAC,CAAC,CACb,MAAO,IAAMI,aAAa,CAACL,QAAQ,CAAC,CACtC,CAAC,CAAE,CAACP,MAAM,CAAC,CAAC,CAEZ,GAAI,CAACA,MAAM,EAAI,CAACA,MAAM,CAACe,IAAI,CAAE,MAAO,KAAI,CAExC,KAAM,CAAAC,SAAS,CAAGC,MAAM,CAACC,IAAI,CAAClB,MAAM,CAACe,IAAI,CAAC,CAC1C,KAAM,CAAAI,QAAQ,CAAGC,IAAI,CAACC,GAAG,CACvB,GAAGL,SAAS,CAACM,OAAO,CAACC,CAAC,EAAIvB,MAAM,CAACe,IAAI,CAACQ,CAAC,CAAC,CAACC,GAAG,CAACC,CAAC,EAAIA,CAAC,CAACC,KAAK,CAACC,MAAM,CAAC,CAAC,CAClE,CACF,CAAC,CAED,mBACE1C,KAAA,QAAK2C,SAAS,CAAC,oBAAoB,CAACC,GAAG,CAAE5B,YAAa,CAAA6B,QAAA,eACpD/C,IAAA,QAAK6C,SAAS,CAAC,iBAAiB,CAAAE,QAAA,CAAE9B,MAAM,CAAC+B,KAAK,EAAI,uBAAuB,CAAM,CAAC,cAChF9C,KAAA,UAAO2C,SAAS,CAAC,gBAAgB,CAAAE,QAAA,eAC/B/C,IAAA,UAAA+C,QAAA,cACE7C,KAAA,OAAA6C,QAAA,eACE/C,IAAA,OAAI6C,SAAS,CAAC,iBAAiB,CAAAE,QAAA,CAAC,aAAW,CAAI,CAAC,cAChD/C,IAAA,OAAI6C,SAAS,CAAC,oBAAoB,CAAAE,QAAA,CAAC,MAAI,CAAI,CAAC,CAC3CE,KAAK,CAACC,IAAI,CAAC,CAAEN,MAAM,CAAER,QAAS,CAAC,CAAE,CAACe,CAAC,CAAEC,CAAC,gBACrClD,KAAA,OAAY2C,SAAS,CAAC,mBAAmB,CAAAE,QAAA,EAAC,WAAM,CAACK,CAAC,CAAG,CAAC,GAA7CA,CAAkD,CAC5D,CAAC,EACA,CAAC,CACA,CAAC,cACRpD,IAAA,UAAA+C,QAAA,CACGd,SAAS,CAACQ,GAAG,CAAC,CAACY,QAAQ,CAAEC,WAAW,GACnCrC,MAAM,CAACe,IAAI,CAACqB,QAAQ,CAAC,CAACZ,GAAG,CAAC,CAACC,CAAC,CAAEa,GAAG,GAAK,CACpC,KAAM,CAAAC,UAAU,CAAGD,GAAG,GAAK,CAAC,CAC5B,KAAM,CAAAE,QAAQ,CAAGtD,WAAW,CAACuC,CAAC,CAACtC,IAAI,CAAC,CACpC,KAAM,CAAAsD,cAAc,CAAGJ,WAAW,CAAG,CAAC,GAAK,CAAC,CAC5C,KAAM,CAAAK,UAAU,CAAGlD,YAAY,CAACiC,CAAC,CAACtC,IAAI,CAAC,CAEvC,mBACEF,KAAA,OAEE2C,SAAS,CAAE,yBAAAe,MAAA,CACPJ,UAAU,CAAG,oBAAoB,CAAG,EAAE,2BAAAI,MAAA,CACtCF,cAAc,CAAG,qBAAqB,CAAG,EAAE,2BAAAE,MAAA,CAC3CD,UAAU,CAAG,iBAAiB,CAAG,EAAE,yBACrCpD,IAAI,CAAC,CAAE,CAAAwC,QAAA,eAET/C,IAAA,OAAI6C,SAAS,CAAC,iBAAiB,CAAAE,QAAA,CAAES,UAAU,CAAGH,QAAQ,CAAG,EAAE,CAAK,CAAC,cACjErD,IAAA,OAAI6C,SAAS,uBAAAe,MAAA,CAAwBH,QAAQ,MAAAG,MAAA,CAAID,UAAU,CAAG,aAAa,CAAG,EAAE,CAAG,CAAAZ,QAAA,CAChFL,CAAC,CAACtC,IAAI,CACL,CAAC,CACJ6C,KAAK,CAACC,IAAI,CAAC,CAAEN,MAAM,CAAER,QAAS,CAAC,CAAE,CAACe,CAAC,CAAEC,CAAC,gBACrCpD,IAAA,OAAY6C,SAAS,CAAC,mBAAmB,CAAAE,QAAA,CAAEL,CAAC,CAACC,KAAK,CAACS,CAAC,CAAC,EAAI,EAAE,EAAlDA,CAAuD,CACjE,CAAC,MAAAQ,MAAA,CAbMP,QAAQ,MAAAO,MAAA,CAAIL,GAAG,CAcrB,CAAC,CAET,CAAC,CACH,CAAC,CACI,CAAC,EACH,CAAC,EACL,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}