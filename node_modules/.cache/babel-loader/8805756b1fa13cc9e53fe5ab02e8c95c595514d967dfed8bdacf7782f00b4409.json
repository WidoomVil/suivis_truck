{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\FabienRobert\\\\Diffusion Tv\\\\suivi-camions\\\\src\\\\TruckTable.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport Papa from \"papaparse\";\nimport \"./TruckTable.css\"; // <--- ajout du CSS externe\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst TruckTable = () => {\n  _s();\n  const [data, setData] = useState([]);\n  const [types] = useState([\"RO\", \"CA\", \"LA\", \"Autres\"]);\n  const [currentTypeIndex, setCurrentTypeIndex] = useState(0);\n  const titleMap = {\n    \"Date Réparation\": /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [\"DATE\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 9\n      }, this), \"R\\xC9PARATION\"]\n    }, void 0, true),\n    \"Prochain Rendez-vous\": /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [\"PROCHAIN\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 9\n      }, this), \"RENDEZ-VOUS\"]\n    }, void 0, true)\n  };\n  useEffect(() => {\n    Papa.parse(\"/truck_status.csv\", {\n      download: true,\n      header: true,\n      complete: results => {\n        const filtered = results.data.map(row => {\n          var _row$Unité;\n          const prefix = ((_row$Unité = row[\"Unité\"]) === null || _row$Unité === void 0 ? void 0 : _row$Unité.substring(0, 2).toUpperCase()) || \"Autres\";\n          const type = [\"RO\", \"CA\", \"LA\"].includes(prefix) ? prefix : \"Autres\";\n          return {\n            ...row,\n            Type: type\n          };\n        }).filter(r => r[\"Unité\"]);\n        setData(filtered);\n      }\n    });\n  }, []);\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCurrentTypeIndex(prev => (prev + 1) % types.length);\n    }, 10000);\n    return () => clearInterval(interval);\n  }, [types]);\n  const currentType = types[currentTypeIndex];\n  const filteredData = data.filter(d => d.Type === currentType);\n  const headers = Object.keys(data[0] || {}).filter(h => h !== \"Type\");\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"truck-container\",\n    children: [currentType && /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"truck-title\",\n      children: currentType\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"truck-table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: headers.map(h => {\n            const isUnite = h === \"Unité\";\n            const isTwoLineTitle = h === \"Date Réparation\" || h === \"Prochain Rendez-vous\";\n            return /*#__PURE__*/_jsxDEV(\"th\", {\n              className: `col-${h.replace(/\\s+/g, \"-\")} ${isUnite ? \"col-unite\" : \"\"}`,\n              children: titleMap[h] || h\n            }, h, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: filteredData.map((row, idx) => {\n          var _row$aptColKey;\n          const aptColKey = headers.find(h => h.toLowerCase().includes(\"apte à rouler\"));\n          const isNon = aptColKey && ((_row$aptColKey = row[aptColKey]) === null || _row$aptColKey === void 0 ? void 0 : _row$aptColKey.toLowerCase()) === \"non\";\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: isNon ? \"row-non\" : idx % 2 === 1 ? \"row-alt\" : \"\",\n            children: headers.map(col => {\n              var _row$col, _row$col2;\n              const isPlainteOrNote = col === \"Plainte\" || col === \"Note\";\n              const isDisponible = col === \"Disponible\";\n              return /*#__PURE__*/_jsxDEV(\"td\", {\n                className: `col-${col.replace(/\\s+/g, \"-\")} ${isPlainteOrNote ? \"col-text\" : \"\"}`,\n                children: isDisponible ? /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: ((_row$col = row[col]) === null || _row$col === void 0 ? void 0 : _row$col.toLowerCase()) === \"oui\" ? \"disponible-oui\" : ((_row$col2 = row[col]) === null || _row$col2 === void 0 ? void 0 : _row$col2.toLowerCase()) === \"non\" ? \"disponible-non\" : \"\",\n                  children: row[col] || \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 95,\n                  columnNumber: 25\n                }, this) : row[col] || \"\"\n              }, col, false, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 21\n              }, this);\n            })\n          }, idx, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n_s(TruckTable, \"G1Ex0I5FRpfufModK1FfAjhinwU=\");\n_c = TruckTable;\nexport default TruckTable;\nvar _c;\n$RefreshReg$(_c, \"TruckTable\");","map":{"version":3,"names":["React","useEffect","useState","Papa","jsxDEV","_jsxDEV","Fragment","_Fragment","TruckTable","_s","data","setData","types","currentTypeIndex","setCurrentTypeIndex","titleMap","children","fileName","_jsxFileName","lineNumber","columnNumber","parse","download","header","complete","results","filtered","map","row","_row$Unité","prefix","substring","toUpperCase","type","includes","Type","filter","r","interval","setInterval","prev","length","clearInterval","currentType","filteredData","d","headers","Object","keys","h","className","isUnite","isTwoLineTitle","replace","idx","_row$aptColKey","aptColKey","find","toLowerCase","isNon","col","_row$col","_row$col2","isPlainteOrNote","isDisponible","_c","$RefreshReg$"],"sources":["C:/Users/FabienRobert/Diffusion Tv/suivi-camions/src/TruckTable.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Papa from \"papaparse\";\r\nimport \"./TruckTable.css\"; // <--- ajout du CSS externe\r\n\r\nconst TruckTable = () => {\r\n  const [data, setData] = useState([]);\r\n  const [types] = useState([\"RO\", \"CA\", \"LA\", \"Autres\"]);\r\n  const [currentTypeIndex, setCurrentTypeIndex] = useState(0);\r\n\r\n  const titleMap = {\r\n    \"Date Réparation\": (\r\n      <>\r\n        DATE\r\n        <br />\r\n        RÉPARATION\r\n      </>\r\n    ),\r\n    \"Prochain Rendez-vous\": (\r\n      <>\r\n        PROCHAIN\r\n        <br />\r\n        RENDEZ-VOUS\r\n      </>\r\n    ),\r\n  };\r\n\r\n  useEffect(() => {\r\n    Papa.parse(\"/truck_status.csv\", {\r\n      download: true,\r\n      header: true,\r\n      complete: (results) => {\r\n        const filtered = results.data\r\n          .map((row) => {\r\n            const prefix = row[\"Unité\"]?.substring(0, 2).toUpperCase() || \"Autres\";\r\n            const type = [\"RO\", \"CA\", \"LA\"].includes(prefix) ? prefix : \"Autres\";\r\n            return { ...row, Type: type };\r\n          })\r\n          .filter((r) => r[\"Unité\"]);\r\n        setData(filtered);\r\n      },\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      setCurrentTypeIndex((prev) => (prev + 1) % types.length);\r\n    }, 10000);\r\n    return () => clearInterval(interval);\r\n  }, [types]);\r\n\r\n  const currentType = types[currentTypeIndex];\r\n  const filteredData = data.filter((d) => d.Type === currentType);\r\n  const headers = Object.keys(data[0] || {}).filter((h) => h !== \"Type\");\r\n\r\n  return (\r\n    <div className=\"truck-container\">\r\n      {currentType && (\r\n        <h2 className=\"truck-title\">{currentType}</h2>\r\n      )}\r\n      <table className=\"truck-table\">\r\n        <thead>\r\n          <tr>\r\n            {headers.map((h) => {\r\n              const isUnite = h === \"Unité\";\r\n              const isTwoLineTitle = h === \"Date Réparation\" || h === \"Prochain Rendez-vous\";\r\n              return (\r\n                <th\r\n                  key={h}\r\n                  className={`col-${h.replace(/\\s+/g, \"-\")} ${isUnite ? \"col-unite\" : \"\"}`}\r\n                >\r\n                  {titleMap[h] || h}\r\n                </th>\r\n              );\r\n            })}\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {filteredData.map((row, idx) => {\r\n            const aptColKey = headers.find((h) => h.toLowerCase().includes(\"apte à rouler\"));\r\n            const isNon = aptColKey && row[aptColKey]?.toLowerCase() === \"non\";\r\n            return (\r\n              <tr\r\n                key={idx}\r\n                className={isNon ? \"row-non\" : idx % 2 === 1 ? \"row-alt\" : \"\"}\r\n              >\r\n                {headers.map((col) => {\r\n                  const isPlainteOrNote = col === \"Plainte\" || col === \"Note\";\r\n                  const isDisponible = col === \"Disponible\";\r\n                  return (\r\n                    <td\r\n                      key={col}\r\n                      className={`col-${col.replace(/\\s+/g, \"-\")} ${isPlainteOrNote ? \"col-text\" : \"\"}`}\r\n                    >\r\n                      {isDisponible ? (\r\n                        <span className={\r\n                          row[col]?.toLowerCase() === \"oui\"\r\n                            ? \"disponible-oui\"\r\n                            : row[col]?.toLowerCase() === \"non\"\r\n                            ? \"disponible-non\"\r\n                            : \"\"\r\n                        }>\r\n                          {row[col] || \"\"}\r\n                        </span>\r\n                      ) : (\r\n                        row[col] || \"\"\r\n                      )}\r\n                    </td>\r\n                  );\r\n                })}\r\n              </tr>\r\n            );\r\n          })}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TruckTable;\r\n\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAOC,IAAI,MAAM,WAAW;AAC5B,OAAO,kBAAkB,CAAC,CAAC;AAAA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE3B,MAAMC,UAAU,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACvB,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACU,KAAK,CAAC,GAAGV,QAAQ,CAAC,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC;EACtD,MAAM,CAACW,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGZ,QAAQ,CAAC,CAAC,CAAC;EAE3D,MAAMa,QAAQ,GAAG;IACf,iBAAiB,eACfV,OAAA,CAAAE,SAAA;MAAAS,QAAA,GAAE,MAEA,eAAAX,OAAA;QAAAY,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,iBAER;IAAA,eAAE,CACH;IACD,sBAAsB,eACpBf,OAAA,CAAAE,SAAA;MAAAS,QAAA,GAAE,UAEA,eAAAX,OAAA;QAAAY,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eAER;IAAA,eAAE;EAEN,CAAC;EAEDnB,SAAS,CAAC,MAAM;IACdE,IAAI,CAACkB,KAAK,CAAC,mBAAmB,EAAE;MAC9BC,QAAQ,EAAE,IAAI;MACdC,MAAM,EAAE,IAAI;MACZC,QAAQ,EAAGC,OAAO,IAAK;QACrB,MAAMC,QAAQ,GAAGD,OAAO,CAACf,IAAI,CAC1BiB,GAAG,CAAEC,GAAG,IAAK;UAAA,IAAAC,UAAA;UACZ,MAAMC,MAAM,GAAG,EAAAD,UAAA,GAAAD,GAAG,CAAC,OAAO,CAAC,cAAAC,UAAA,uBAAZA,UAAA,CAAcE,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,KAAI,QAAQ;UACtE,MAAMC,IAAI,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAACC,QAAQ,CAACJ,MAAM,CAAC,GAAGA,MAAM,GAAG,QAAQ;UACpE,OAAO;YAAE,GAAGF,GAAG;YAAEO,IAAI,EAAEF;UAAK,CAAC;QAC/B,CAAC,CAAC,CACDG,MAAM,CAAEC,CAAC,IAAKA,CAAC,CAAC,OAAO,CAAC,CAAC;QAC5B1B,OAAO,CAACe,QAAQ,CAAC;MACnB;IACF,CAAC,CAAC;EACJ,CAAC,EAAE,EAAE,CAAC;EAENzB,SAAS,CAAC,MAAM;IACd,MAAMqC,QAAQ,GAAGC,WAAW,CAAC,MAAM;MACjCzB,mBAAmB,CAAE0B,IAAI,IAAK,CAACA,IAAI,GAAG,CAAC,IAAI5B,KAAK,CAAC6B,MAAM,CAAC;IAC1D,CAAC,EAAE,KAAK,CAAC;IACT,OAAO,MAAMC,aAAa,CAACJ,QAAQ,CAAC;EACtC,CAAC,EAAE,CAAC1B,KAAK,CAAC,CAAC;EAEX,MAAM+B,WAAW,GAAG/B,KAAK,CAACC,gBAAgB,CAAC;EAC3C,MAAM+B,YAAY,GAAGlC,IAAI,CAAC0B,MAAM,CAAES,CAAC,IAAKA,CAAC,CAACV,IAAI,KAAKQ,WAAW,CAAC;EAC/D,MAAMG,OAAO,GAAGC,MAAM,CAACC,IAAI,CAACtC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC0B,MAAM,CAAEa,CAAC,IAAKA,CAAC,KAAK,MAAM,CAAC;EAEtE,oBACE5C,OAAA;IAAK6C,SAAS,EAAC,iBAAiB;IAAAlC,QAAA,GAC7B2B,WAAW,iBACVtC,OAAA;MAAI6C,SAAS,EAAC,aAAa;MAAAlC,QAAA,EAAE2B;IAAW;MAAA1B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAC9C,eACDf,OAAA;MAAO6C,SAAS,EAAC,aAAa;MAAAlC,QAAA,gBAC5BX,OAAA;QAAAW,QAAA,eACEX,OAAA;UAAAW,QAAA,EACG8B,OAAO,CAACnB,GAAG,CAAEsB,CAAC,IAAK;YAClB,MAAME,OAAO,GAAGF,CAAC,KAAK,OAAO;YAC7B,MAAMG,cAAc,GAAGH,CAAC,KAAK,iBAAiB,IAAIA,CAAC,KAAK,sBAAsB;YAC9E,oBACE5C,OAAA;cAEE6C,SAAS,EAAE,OAAOD,CAAC,CAACI,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,IAAIF,OAAO,GAAG,WAAW,GAAG,EAAE,EAAG;cAAAnC,QAAA,EAExED,QAAQ,CAACkC,CAAC,CAAC,IAAIA;YAAC,GAHZA,CAAC;cAAAhC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAIJ,CAAC;UAET,CAAC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CAAC,eACRf,OAAA;QAAAW,QAAA,EACG4B,YAAY,CAACjB,GAAG,CAAC,CAACC,GAAG,EAAE0B,GAAG,KAAK;UAAA,IAAAC,cAAA;UAC9B,MAAMC,SAAS,GAAGV,OAAO,CAACW,IAAI,CAAER,CAAC,IAAKA,CAAC,CAACS,WAAW,CAAC,CAAC,CAACxB,QAAQ,CAAC,eAAe,CAAC,CAAC;UAChF,MAAMyB,KAAK,GAAGH,SAAS,IAAI,EAAAD,cAAA,GAAA3B,GAAG,CAAC4B,SAAS,CAAC,cAAAD,cAAA,uBAAdA,cAAA,CAAgBG,WAAW,CAAC,CAAC,MAAK,KAAK;UAClE,oBACErD,OAAA;YAEE6C,SAAS,EAAES,KAAK,GAAG,SAAS,GAAGL,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,SAAS,GAAG,EAAG;YAAAtC,QAAA,EAE7D8B,OAAO,CAACnB,GAAG,CAAEiC,GAAG,IAAK;cAAA,IAAAC,QAAA,EAAAC,SAAA;cACpB,MAAMC,eAAe,GAAGH,GAAG,KAAK,SAAS,IAAIA,GAAG,KAAK,MAAM;cAC3D,MAAMI,YAAY,GAAGJ,GAAG,KAAK,YAAY;cACzC,oBACEvD,OAAA;gBAEE6C,SAAS,EAAE,OAAOU,GAAG,CAACP,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,IAAIU,eAAe,GAAG,UAAU,GAAG,EAAE,EAAG;gBAAA/C,QAAA,EAEjFgD,YAAY,gBACX3D,OAAA;kBAAM6C,SAAS,EACb,EAAAW,QAAA,GAAAjC,GAAG,CAACgC,GAAG,CAAC,cAAAC,QAAA,uBAARA,QAAA,CAAUH,WAAW,CAAC,CAAC,MAAK,KAAK,GAC7B,gBAAgB,GAChB,EAAAI,SAAA,GAAAlC,GAAG,CAACgC,GAAG,CAAC,cAAAE,SAAA,uBAARA,SAAA,CAAUJ,WAAW,CAAC,CAAC,MAAK,KAAK,GACjC,gBAAgB,GAChB,EACL;kBAAA1C,QAAA,EACEY,GAAG,CAACgC,GAAG,CAAC,IAAI;gBAAE;kBAAA3C,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACX,CAAC,GAEPQ,GAAG,CAACgC,GAAG,CAAC,IAAI;cACb,GAfIA,GAAG;gBAAA3C,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAgBN,CAAC;YAET,CAAC;UAAC,GA1BGkC,GAAG;YAAArC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OA2BN,CAAC;QAET,CAAC;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACG,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEV,CAAC;AAACX,EAAA,CAhHID,UAAU;AAAAyD,EAAA,GAAVzD,UAAU;AAkHhB,eAAeA,UAAU;AAAC,IAAAyD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}